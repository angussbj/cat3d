{"version":3,"sources":["ui/Colors.ts","ui/Column.tsx","ui/Row.tsx","ui/T.tsx","components/useEnvironment.tsx","components/Draggable.tsx","utilities/keys.ts","logic/Elements.ts","components/materials/HighlightMaterial.tsx","components/materials/SolidMaterial.tsx","components/materials/TranslucentMaterial.tsx","components/geometries/bezierTubeGeometry.ts","components/geometries/sphereGeometry.ts","components/Content.tsx","components/Lighting.tsx","components/Environment.tsx","App.tsx","index.tsx"],"names":["Colors","HIGHLIGHTS","Color","BLACK","DARK","GREY","LIGHT","WHITE","LIGHTING","WARM","NEUTRAL","COLD","styled","div","EnvironmentContext","createContext","setCurrentlyDragging","setOnBackgroundClick","setControlMode","controlMode","render","EnvironmentContextProvider","children","environment","Provider","value","useEnvironment","useContext","Draggable","position","Vector3","onClick","objectRef","useRef","useThree","camera","size","raycaster","useMemo","Raycaster","planeRef","Plane","mouseObjectOffset","useEffect","current","copy","screenToSpace","useCallback","x","y","screenCoords","Vector2","width","height","intersection","setFromCamera","ray","intersectPlane","bind","useDrag","xy","movement","dx","dy","first","last","event","stopPropagation","cameraDirection","getWorldDirection","setFromNormalAndCoplanarPoint","clone","sub","add","ref","keys","o","Object","isNodeId","id","startsWith","isArrowId","Elements","nodes","arrows","twoArrows","threeArrows","nodeIdCounter","arrowIdCounter","twoArrowIdCounter","threeArrowIdCounter","selected","urlParams","URLSearchParams","window","location","search","serialisedNodes","get","this","setNodesFromSerialisedNodes","serialisedArrows","setArrowsFromSerialisedArrows","url","URL","toString","searchParams","set","history","pushState","values","map","n","toFixed","z","join","serialised","split","forEach","str","pieces","parseFloat","a","domainId","codomainId","guidePoint","update","autoBind","multiplyScalar","filter","onNodeClick","onArrowClick","isSelected","shiftKey","ctrlKey","metaKey","getSelectedNodeIds","addArrow","arrowId","arrow","twoArrowId","twoArrow","codomainIds","includes","domainIds","threeArrowId","threeArrow","key","deleteNode","deleteArrow","isTwoArrowId","deleteTwoArrow","isThreeArrowId","deleteThreeArrow","HighlightMaterial","color","attach","side","BackSide","SolidMaterial","emissiveIntensity","roughness","TranslucentMaterial","opacity","transparent","getBezierTubeGeometry","points","radius","resolution","ParametricGeometries","TubeGeometry","length","QuadraticBezierCurve3","CubicBezierCurve3","getSphereGeometry","semicirclePoints","i","push","Math","sin","PI","cos","LatheGeometry","Content","elements","document","addEventListener","onKeyDown","removeEventListener","useState","nodeRadius","guidePointRadius","highlightWidth","arrowRadius","plane","altKey","button","addNode","getNodes","nodeId","geometry","castShadow","receiveShadow","getArrows","index","getArrowPoints","Lighting","intensity","Environment","currentlyDragging","onBackgroundClick","setRenderHelper","style","left","right","top","bottom","background","onPointerMissed","shadows","args","OrbitControls","autoRotate","App","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.11c33a97.chunk.js","sourcesContent":["import Color from \"color\";\n\nexport const Colors = {\n  HIGHLIGHTS: [Color(\"#11E533\")],\n  BLACK: Color(\"#000000\"),\n  DARK: Color(\"#0d1416\"),\n  GREY: Color(\"#475154\"),\n  LIGHT: Color(\"#f7f9f9\"),\n  WHITE: Color(\"#FFFFFF\"),\n  LIGHTING: {\n    WARM: Color(\"#FFCCCC\"),\n    NEUTRAL: Color(\"#E5CCE5\"),\n    COLD: Color(\"#CCCCFF\"),\n  },\n};\n","import styled from \"styled-components\";\n\nexport const Column = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n","import styled from \"styled-components\";\n\nexport const Row = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Colors } from \"./Colors\";\nimport Color from \"color\";\n\ninterface Props {\n  size?: \"small\" | \"tiny\";\n  color?: Color;\n  children: React.ReactNode;\n  unselectable?: boolean;\n  monospace?: boolean;\n  style?: React.CSSProperties;\n}\n\nexport function T({\n  size,\n  color,\n  unselectable,\n  monospace,\n  children,\n  style,\n}: Props): React.ReactElement {\n  const finalStyle = {\n    color: (color || Colors.LIGHT.fade(0.2)).toString(),\n    fontSize:\n      size === \"tiny\" ? 8 : size === \"small\" ? 11 : size === \"big\" ? 16 : 12,\n    fontFamily: monospace ? \"monospace\" : undefined,\n    ...style,\n  };\n\n  return unselectable ? (\n    <UnselectableText style={finalStyle}>{children}</UnselectableText>\n  ) : (\n    <div style={finalStyle}>{children}</div>\n  );\n}\n\nconst UnselectableText = styled.div`\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n`;\n","import React, {\n  createContext,\n  ReactElement,\n  ReactNode,\n  useContext,\n} from \"react\";\nimport { ControlMode } from \"./ControlMode\";\n\ntype Environment = {\n  setCurrentlyDragging: (enabled: boolean) => void;\n  setOnBackgroundClick: (handler: (event: MouseEvent) => void) => void;\n  setControlMode: (mode: ControlMode) => void;\n  controlMode: ControlMode;\n  render: () => void;\n};\n\nconst EnvironmentContext = createContext<Environment>({\n  setCurrentlyDragging: () => {},\n  setOnBackgroundClick: () => {},\n  setControlMode: () => {},\n  controlMode: \"view\",\n  render: () => {},\n});\n\nexport function EnvironmentContextProvider({\n  children,\n  environment,\n}: {\n  environment: Environment;\n  children: ReactNode;\n}): ReactElement {\n  return (\n    <EnvironmentContext.Provider value={environment}>\n      {children}\n    </EnvironmentContext.Provider>\n  );\n}\n\nexport function useEnvironment(): Environment {\n  return useContext(EnvironmentContext);\n}\n","import React, {\n  ReactElement,\n  ReactNode,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n} from \"react\";\nimport { useThree } from \"@react-three/fiber\";\nimport { useDrag } from \"react-use-gesture\";\nimport { Group, Plane, Raycaster, Vector2, Vector3 } from \"three\";\nimport { useEnvironment } from \"./useEnvironment\";\nimport { ClickEvent } from \"./ClickEvent\";\n\ntype Props = {\n  position?: Vector3;\n  onClick?: (event: ClickEvent) => void;\n  children?: ReactNode;\n};\n\nexport const Draggable = ({\n  position = new Vector3(0, 0, 0),\n  onClick,\n  children,\n}: Props): ReactElement => {\n  const objectRef = useRef<Group>(null);\n  const { setCurrentlyDragging } = useEnvironment();\n  const { camera, size } = useThree();\n\n  // Raycaster and plane used to project the mouse movements from the camera onto the plane\n  const raycaster = useMemo(() => new Raycaster(), []);\n  const planeRef = useRef(new Plane(new Vector3(0, 0, 1)));\n  const mouseObjectOffset = useRef(new Vector3(0, 0, 0));\n\n  useEffect(() => {\n    if (objectRef.current) {\n      objectRef.current.position.copy(position);\n    }\n  }, []);\n\n  const screenToSpace = useCallback((x: number, y: number): Vector3 => {\n    const screenCoords = new Vector2(\n      (x / size.width) * 2 - 1,\n      -(y / size.height) * 2 + 1\n    );\n\n    const intersection = new Vector3();\n    raycaster.setFromCamera(screenCoords, camera);\n    raycaster.ray.intersectPlane(planeRef.current, intersection);\n\n    return intersection;\n  }, []);\n\n  const bind = useDrag(\n    ({ xy: [x, y], movement: [dx, dy], first, last, event }) => {\n      event.stopPropagation();\n      if (first) {\n        setCurrentlyDragging(true);\n\n        const cameraDirection = new Vector3();\n        camera.getWorldDirection(cameraDirection);\n        planeRef.current.setFromNormalAndCoplanarPoint(\n          cameraDirection,\n          objectRef.current?.position || new Vector3(0, 0, 0)\n        );\n\n        mouseObjectOffset.current =\n          objectRef.current?.position.clone().sub(screenToSpace(x, y)) ||\n          new Vector3(0, 0, 0);\n      }\n\n      if (objectRef.current) {\n        objectRef.current.position.copy(\n          screenToSpace(x, y).add(mouseObjectOffset.current)\n        );\n      }\n\n      if (last) {\n        setCurrentlyDragging(false);\n        if (objectRef.current) position.copy(objectRef.current.position);\n        if (dx === 0 && dy === 0) onClick?.(event);\n      }\n    }\n  ) as () => {};\n\n  return (\n    <group {...bind()} ref={objectRef}>\n      {children}\n    </group>\n  );\n};\n","export function keys<T extends Record<string, unknown>>(o: T): (keyof T)[] {\n  return Object.keys(o) as (keyof T)[];\n}\n","import { Vector3 } from \"three\";\nimport { keys } from \"../utilities/keys\";\nimport { ClickDetails } from \"./ClickDetails\";\nimport autoBind from \"auto-bind\";\n\ntype NodeId = `n${number}`;\ntype ArrowId = `1a${number}`;\ntype TwoArrowId = `2a${number}`;\ntype ThreeArrowId = `3a${number}`;\ntype ElementId = NodeId | ArrowId | TwoArrowId | ThreeArrowId;\n\nfunction isNodeId(id: ElementId): id is NodeId {\n  return id.startsWith(\"n\");\n}\n\nfunction isArrowId(id: ElementId): id is ArrowId {\n  return id.startsWith(\"1a\");\n}\n\nfunction isTwoArrowId(id: ElementId): id is TwoArrowId {\n  return id.startsWith(\"2a\");\n}\n\nfunction isThreeArrowId(id: ElementId): id is ThreeArrowId {\n  return id.startsWith(\"3a\");\n}\n\ninterface Element {\n  label?: string;\n}\n\ninterface Node extends Element {\n  id: NodeId;\n  position: Vector3;\n}\n\ninterface Arrow extends Element {\n  id: ArrowId;\n  domainId: NodeId;\n  codomainId: NodeId;\n  guidePoint: Vector3;\n}\n\ninterface TwoArrow extends Element {\n  id: TwoArrowId;\n  domainIds: ArrowId[];\n  codomainIds: ArrowId[];\n  guidePoint: Vector3;\n}\n\ninterface ThreeArrow extends Element {\n  id: ThreeArrowId;\n  domainIds: TwoArrowId[];\n  codomainIds: TwoArrowId[];\n}\n\nexport class Elements {\n  private nodes: Record<NodeId, Node> = {};\n  private arrows: Record<ArrowId, Arrow> = {};\n  private twoArrows: Record<TwoArrowId, TwoArrow> = {};\n  private threeArrows: Record<ThreeArrowId, ThreeArrow> = {};\n  private nodeIdCounter = 0;\n  private arrowIdCounter = 0;\n  private twoArrowIdCounter = 0;\n  private threeArrowIdCounter = 0;\n  private selected: Record<ElementId, boolean> = {};\n\n  constructor(private render: () => void) {\n    const urlParams = new URLSearchParams(window.location.search);\n    const serialisedNodes = urlParams.get(\"n\");\n    if (serialisedNodes) this.setNodesFromSerialisedNodes(serialisedNodes);\n    const serialisedArrows = urlParams.get(\"a\");\n    if (serialisedArrows) this.setArrowsFromSerialisedArrows(serialisedArrows);\n  }\n\n  // TODO: make update run after dragging\n  update(): void {\n    const url = new URL(window.location.toString());\n    url.searchParams.set(\"n\", this.serialisedNodes());\n    url.searchParams.set(\"a\", this.serialisedArrows());\n    window.history.pushState({}, \"\", url);\n    this.render();\n  }\n\n  serialisedNodes(): string {\n    return Object.values(this.nodes)\n      .map((n) =>\n        [\n          n.id,\n          n.position.x.toFixed(3),\n          n.position.y.toFixed(3),\n          n.position.z.toFixed(3),\n        ].join(\"*\")\n      )\n      .join(\"_\");\n  }\n\n  setNodesFromSerialisedNodes(serialised: string): void {\n    this.nodes = {};\n    serialised.split(\"_\").forEach((str) => {\n      const pieces = str.split(\"*\");\n      this.nodes[pieces[0] as NodeId] = {\n        id: pieces[0] as NodeId,\n        position: new Vector3(\n          parseFloat(pieces[1]),\n          parseFloat(pieces[2]),\n          parseFloat(pieces[3])\n        ),\n      };\n    });\n  }\n\n  serialisedArrows(): string {\n    return Object.values(this.arrows)\n      .map((a) =>\n        [\n          a.id,\n          a.domainId,\n          a.codomainId,\n          a.guidePoint.x.toFixed(3),\n          a.guidePoint.y.toFixed(3),\n          a.guidePoint.z.toFixed(3),\n        ].join(\"*\")\n      )\n      .join(\"_\");\n  }\n\n  setArrowsFromSerialisedArrows(serialised: string): void {\n    this.arrows = {};\n    serialised.split(\"_\").forEach((str) => {\n      const pieces = str.split(\"*\");\n      this.arrows[pieces[0] as ArrowId] = {\n        id: pieces[0] as ArrowId,\n        domainId: pieces[1] as NodeId,\n        codomainId: pieces[2] as NodeId,\n        guidePoint: new Vector3(\n          parseFloat(pieces[3]),\n          parseFloat(pieces[4]),\n          parseFloat(pieces[5])\n        ),\n      };\n    });\n  }\n\n  addNode(position: Vector3): void {\n    const id: NodeId = `n${this.nodeIdCounter}`;\n    this.nodeIdCounter += 1;\n    this.nodes[id] = { position, id };\n    this.selected = {};\n    this.update();\n    autoBind(this);\n  }\n\n  addArrow(domainId: NodeId, codomainId: NodeId): void {\n    const id: ArrowId = `1a${this.arrowIdCounter}`;\n    this.arrowIdCounter += 1;\n    this.arrows[id] = {\n      domainId,\n      codomainId,\n      id,\n      guidePoint: new Vector3()\n        .copy(this.nodes[domainId].position)\n        .add(this.nodes[codomainId].position)\n        .multiplyScalar(0.5),\n    };\n  }\n\n  getNodes(): Node[] {\n    return Object.values(this.nodes);\n  }\n\n  getArrows(): Arrow[] {\n    return Object.values(this.arrows);\n  }\n\n  getArrowPoints(id: ArrowId): [Vector3, Vector3, Vector3] {\n    const { domainId, guidePoint, codomainId } = this.arrows[id];\n    return [\n      this.nodes[domainId].position,\n      guidePoint,\n      this.nodes[codomainId].position,\n    ];\n  }\n\n  getSelectedNodeIds(): NodeId[] {\n    return keys(this.selected)\n      .filter(isNodeId)\n      .filter((x) => this.selected[x]);\n  }\n\n  getSelectedArrowIds(): ArrowId[] {\n    return keys(this.selected)\n      .filter(isArrowId)\n      .filter((x) => this.selected[x]);\n  }\n\n  onClick(id: ElementId, event: ClickDetails): void {\n    if (isNodeId(id)) this.onNodeClick(id, event);\n    else if (isArrowId(id)) this.onArrowClick(id, event);\n    this.update();\n  }\n\n  onNodeClick(id: NodeId, event: ClickDetails): void {\n    if (this.isSelected(id)) {\n      if (event.shiftKey) {\n        this.selected[id] = false;\n      } else {\n        this.selected = {};\n      }\n    } else if (event.shiftKey) {\n      this.selected[id] = true;\n    } else if (event.ctrlKey || event.metaKey) {\n      this.getSelectedNodeIds().forEach((domainId) => {\n        this.addArrow(domainId, id);\n      });\n      this.selected = {};\n    } else {\n      this.selected = { [id]: true };\n    }\n  }\n\n  onArrowClick(id: ArrowId, event: ClickDetails): void {\n    if (this.isSelected(id)) {\n      if (event.shiftKey) {\n        this.selected[id] = false;\n      } else {\n        this.selected = {};\n      }\n    } else if (event.shiftKey && !(event.ctrlKey || event.metaKey)) {\n      // TODO: check that the selected arrows compose\n      this.selected[id] = true;\n    } else if (event.ctrlKey || event.metaKey) {\n      // TODO: work out how to build a 2-arrow\n      this.selected = {};\n    } else {\n      this.selected = { [id]: true };\n    }\n  }\n\n  isSelected(id: ElementId): boolean {\n    return !!this.selected[id];\n  }\n\n  deleteNode(id: NodeId): void {\n    delete this.nodes[id];\n    keys(this.arrows).forEach((arrowId) => {\n      const arrow = this.arrows[arrowId];\n      if (arrow.codomainId === id || arrow.domainId === id) {\n        delete this.arrows[arrowId];\n      }\n    });\n  }\n\n  deleteArrow(id: ArrowId): void {\n    delete this.arrows[id];\n    keys(this.twoArrows).forEach((twoArrowId) => {\n      const twoArrow = this.twoArrows[twoArrowId];\n      if (\n        twoArrow.codomainIds.includes(id) ||\n        twoArrow.domainIds.includes(id)\n      ) {\n        delete this.twoArrows[twoArrowId];\n      }\n    });\n  }\n\n  deleteTwoArrow(id: TwoArrowId): void {\n    delete this.twoArrows[id];\n    keys(this.threeArrows).forEach((threeArrowId) => {\n      const threeArrow = this.threeArrows[threeArrowId];\n      if (\n        threeArrow.codomainIds.includes(id) ||\n        threeArrow.domainIds.includes(id)\n      ) {\n        delete this.threeArrows[threeArrowId];\n      }\n    });\n  }\n\n  deleteThreeArrow(id: ThreeArrowId): void {\n    delete this.threeArrows[id];\n  }\n\n  onKeyDown(event: KeyboardEvent): void {\n    if (event.key === \"Backspace\") {\n      keys(this.selected).forEach((id) => {\n        if (isNodeId(id)) this.deleteNode(id);\n        if (isArrowId(id)) this.deleteArrow(id);\n        if (isTwoArrowId(id)) this.deleteTwoArrow(id);\n        if (isThreeArrowId(id)) this.deleteThreeArrow(id);\n      });\n      this.selected = {};\n      this.update();\n    }\n  }\n}\n","import React from \"react\";\nimport Color from \"color\";\nimport { BackSide } from \"three\";\n\ninterface Props {\n  color: Color;\n}\n\nexport function HighlightMaterial({ color }: Props): React.ReactElement {\n  return (\n    <meshBasicMaterial\n      attach=\"material\"\n      color={color.toString()}\n      side={BackSide}\n    />\n  );\n}\n","import React from \"react\";\nimport Color from \"color\";\n\ninterface Props {\n  color: Color;\n}\n\nexport function SolidMaterial({ color }: Props): React.ReactElement {\n  return (\n    <meshStandardMaterial\n      attach=\"material\"\n      color={color.toString()}\n      emissiveIntensity={0}\n      roughness={0.5}\n    />\n  );\n}\n","import React from \"react\";\nimport Color from \"color\";\n\ninterface Props {\n  color: Color;\n}\n\nexport function TranslucentMaterial({ color }: Props): React.ReactElement {\n  return (\n    <meshStandardMaterial\n      attach=\"material\"\n      color={color.toString()}\n      opacity={0.3}\n      transparent\n    />\n  );\n}\n","import { CubicBezierCurve3, QuadraticBezierCurve3, Vector3 } from \"three\";\nimport { BufferGeometry } from \"three/src/core/BufferGeometry\";\nimport { ParametricGeometries } from \"three/examples/jsm/geometries/ParametricGeometries\";\n\nexport function getBezierTubeGeometry(\n  points: [Vector3, Vector3, Vector3] | [Vector3, Vector3, Vector3, Vector3],\n  radius = 0.02,\n  resolution = 48\n): BufferGeometry {\n  return new ParametricGeometries.TubeGeometry(\n    points.length === 3\n      ? new QuadraticBezierCurve3(...points)\n      : new CubicBezierCurve3(...points),\n    resolution,\n    radius,\n    12\n  );\n}\n","import { LatheGeometry, Vector2 } from \"three\";\nimport { BufferGeometry } from \"three/src/core/BufferGeometry\";\n\nexport function getSphereGeometry(\n  radius = 0.05,\n  resolution = 12\n): BufferGeometry {\n  const semicirclePoints = [];\n  for (let i = 0; i <= resolution; i++) {\n    semicirclePoints.push(\n      new Vector2(\n        radius * Math.sin((i * Math.PI) / resolution),\n        -radius * Math.cos((i * Math.PI) / resolution)\n      )\n    );\n  }\n\n  return new LatheGeometry(semicirclePoints, 2 * resolution);\n}\n","import React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { Colors } from \"ui\";\nimport { Draggable } from \"./Draggable\";\nimport { Plane, Raycaster, Vector2, Vector3 } from \"three\";\nimport { useEnvironment } from \"./useEnvironment\";\nimport { useThree } from \"@react-three/fiber\";\nimport { Elements } from \"logic\";\nimport {\n  HighlightMaterial,\n  SolidMaterial,\n  TranslucentMaterial,\n} from \"./materials\";\nimport { ClickEvent } from \"./ClickEvent\";\nimport { getBezierTubeGeometry, getSphereGeometry } from \"./geometries\";\n\nexport function Content(): React.ReactElement {\n  const { setOnBackgroundClick, render } = useEnvironment();\n  const elements = useRef(new Elements(render)).current;\n  const { camera, size } = useThree();\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", elements.onKeyDown.bind(elements));\n\n    // TODO: load state from url\n\n    return (): void => {\n      document.removeEventListener(\n        \"keydown\",\n        elements.onKeyDown.bind(elements)\n      );\n    };\n  }, []);\n\n  // TODO: add options section to control these variables\n  const [nodeRadius] = useState(0.1);\n  const [guidePointRadius] = useState(0.07);\n  const [highlightWidth] = useState(0.005);\n  const [arrowRadius] = useState(0.02);\n\n  const raycaster = useMemo(() => new Raycaster(), []);\n  const plane = useMemo(() => new Plane(new Vector3(0, 1, 0)), []);\n\n  useEffect(\n    () =>\n      setOnBackgroundClick(() => (event: MouseEvent): void => {\n        if (\n          event.ctrlKey ||\n          event.altKey ||\n          event.metaKey ||\n          event.shiftKey ||\n          event.button > 1\n        ) {\n          return;\n        }\n\n        const screenCoords = new Vector2(\n          (event.x / size.width) * 2 - 1,\n          -(event.y / size.height) * 2 + 1\n        );\n\n        const intersection = new Vector3();\n        raycaster.setFromCamera(screenCoords, camera);\n        raycaster.ray.intersectPlane(plane, intersection);\n\n        elements.addNode(intersection);\n        render();\n      }),\n    [setOnBackgroundClick]\n  );\n\n  return (\n    <>\n      {elements.getNodes().map(({ position, id: nodeId }) => (\n        <Draggable\n          position={position}\n          key={nodeId}\n          onClick={(event: ClickEvent): void => elements.onClick(nodeId, event)}\n        >\n          <mesh\n            geometry={getSphereGeometry(nodeRadius)}\n            castShadow\n            receiveShadow\n          >\n            <SolidMaterial color={Colors.GREY} />\n          </mesh>\n          {elements.isSelected(nodeId) && (\n            <mesh geometry={getSphereGeometry(nodeRadius + highlightWidth)}>\n              <HighlightMaterial color={Colors.HIGHLIGHTS[0]} />\n            </mesh>\n          )}\n        </Draggable>\n      ))}\n      {elements.getArrows().map(({ id: arrowId, guidePoint }, index) => (\n        <>\n          <mesh\n            key={arrowId}\n            geometry={getBezierTubeGeometry(\n              elements.getArrowPoints(arrowId),\n              arrowRadius\n            )}\n            onClick={(event): void => elements.onClick(arrowId, event)}\n            castShadow\n            receiveShadow\n          >\n            <SolidMaterial color={Colors.GREY} />\n          </mesh>\n          {elements.isSelected(arrowId) && (\n            <>\n              <mesh\n                key={arrowId + \"highlight\"}\n                geometry={getBezierTubeGeometry(\n                  elements.getArrowPoints(arrowId),\n                  arrowRadius + highlightWidth\n                )}\n              >\n                <HighlightMaterial color={Colors.HIGHLIGHTS[0]} />\n              </mesh>\n              <Draggable position={guidePoint} key={arrowId + \"guidePoint\"}>\n                <mesh geometry={getSphereGeometry(guidePointRadius)}>\n                  <TranslucentMaterial color={Colors.HIGHLIGHTS[0]} />\n                </mesh>\n              </Draggable>\n            </>\n          )}\n        </>\n      ))}\n    </>\n  );\n}\n","import React, { FC } from \"react\";\nimport { Colors } from \"ui\";\n\nexport const Lighting: FC = () => {\n  // general glow plus three slightly different-warmth lights around the equator\n  return (\n    <>\n      <ambientLight intensity={0.45} />\n      <directionalLight\n        position={[0, 0, 20]}\n        color={Colors.LIGHTING.WARM.toString()}\n        castShadow={true}\n      />\n      <directionalLight\n        position={[17, 0, -10]}\n        color={Colors.LIGHTING.COLD.toString()}\n        castShadow={true}\n      />\n      <directionalLight\n        position={[-17, 0, -10]}\n        color={Colors.LIGHTING.NEUTRAL.toString()}\n        castShadow={true}\n      />\n      <directionalLight\n        position={[0, 20, 0]}\n        color={Colors.LIGHTING.WARM.toString()}\n        castShadow={true}\n      />\n      <directionalLight\n        position={[0, -20, 0]}\n        color={Colors.LIGHTING.COLD.toString()}\n        castShadow={true}\n      />\n    </>\n  );\n};\n","import React, { ReactNode, useCallback, useState } from \"react\";\nimport { Canvas } from \"@react-three/fiber\";\nimport { Lighting } from \"./Lighting\";\nimport { Colors } from \"ui\";\nimport { OrbitControls } from \"@react-three/drei\";\nimport { EnvironmentContextProvider } from \"./useEnvironment\";\nimport { ControlMode } from \"./ControlMode\";\n\nexport function Environment({\n  children,\n}: {\n  children: ReactNode;\n}): React.ReactElement {\n  const [currentlyDragging, setCurrentlyDragging] = useState(false);\n  const [controlMode, setControlMode] = useState<ControlMode>(\"view\");\n  const [onBackgroundClick, setOnBackgroundClick] = useState<\n    (event: MouseEvent) => void\n  >(() => {});\n\n  const [renderHelper, setRenderHelper] = useState(false);\n  const render = useCallback((): void => setRenderHelper((x) => !x), []);\n\n  return (\n    <div style={{ position: \"absolute\", left: 0, right: 0, top: 0, bottom: 0 }}>\n      <EnvironmentContextProvider\n        environment={{\n          setCurrentlyDragging,\n          setOnBackgroundClick,\n          setControlMode,\n          controlMode,\n          render,\n        }}\n      >\n        <Canvas\n          style={{ background: Colors.BLACK.toString() }}\n          camera={{ position: [4, 4, 10] }}\n          onPointerMissed={onBackgroundClick}\n          shadows\n        >\n          <gridHelper args={[20, 20]} />\n          <Lighting />\n          {children}\n          {!currentlyDragging && controlMode == \"view\" && (\n            <OrbitControls autoRotate={false} />\n          )}\n        </Canvas>\n      </EnvironmentContextProvider>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Content } from \"components\";\nimport { Environment } from \"./components/Environment\";\n\nfunction App(): React.ReactElement {\n  return (\n    <Environment>\n      <Content />\n    </Environment>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\n// TODO: Replace with createRoot\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}